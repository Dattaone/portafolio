---
import Code from "@/icons/Code.astro";
import Spanish from "@/icons/Spanish.astro";
import English from "@/icons/English.astro";
import MenuIcon from "@/icons/MenuIcon.astro";
import DropdownArrow from "@/icons/DropdownArrow.astro";
import LanguageDropdown from "@/components/LanguageDropdown.astro";
---

<header
  id="landing-header"
  class="flex items-center justify-between
    py-0 px-2
    text-sm text-sky-500
    [&>nav>ul>li>button]:px-2.5 [&>nav>ul>li>button]:py-4
    [&>nav>ul>li>button]:transition-colors [&>nav>ul>li>button]:duration-500 [&>nav>ul>li>button]:font-medium"
>
  <nav class="menu flex flex-grow basis-0">
    <ul>
      <li>
        <button id="landing-logo" data-target="hero" class="scroll-to flex font-semibold text-current">
          <span><Code class="size-5" /></span><h1 class="ml-1.5">Chepogor</h1>
        </button>
      </li>
    </ul>
  </nav>

  <nav class="menu hidden sm:flex">
    <ul
      class="flex [&>li>button]:inline-block translate-x-5 text-gunmetal font-semibold"
    >
      <li><button class="scroll-to" data-target="hero">Inicio</button></li>
      <li><button class="scroll-to" data-target="experience">Experiencia</button></li>
      <li><button class="scroll-to" data-target="projects">Proyectos</button></li>
      <li><button class="scroll-to" data-target="about">Sobre mí</button></li>
      <li><button class="scroll-to" data-target="contact">Contacto</button></li>
    </ul>
  </nav>

  <nav class="menu hidden sm:flex flex-grow basis-0 justify-end mr-8">
    <ul class="flex gap-2">
      <li>
        <LanguageDropdown primary="true" />
      </li>
    </ul>
  </nav>

  <nav class="menu sm:hidden flex justify-end mr-2">
    <ul class="flex gap-2">
      <li>
        <div class="relative">
          <button
            id="menu-toggle"
            class="toogle-element flex items-center gap-1 px-2"
          >
            <span class="relative"><MenuIcon class="size-4" /></span>
          </button>
        </div>
      </li>
    </ul>
  </nav>

  <div
    id="menu-backdrop"
    class={`
            absolute bg-black/5 backdrop-blur-lg rounded 
            translate-x-[var(--left)] translate-y-[var(--top)]
            left-0 top-0
            w-[var(--width)] h-[var(--height)]
            transition-all duration-300
            ease-in-out opacity-0 -z-10
          `}
  >
  </div>

  <div
    id="menu-dropdown"
    class="dropdown-element hidden absolute left-0 top-0 px-3 py-5 bg-gunmetal/95 shadow-lg rounded-lg w-full text-white"
  >
    <nav class="flex flex-col gap-6">
      <ul class="flex justify-between px-1">
        <li>
          <button id="landing-logo" class="scroll-to menu-close flex font-semibold text-sky-500" data-target="inicio">
            <span><Code class="size-5" /></span><h1 class="ml-2">Chepogor</h1>
          </button>
        </li>
        <li>
          <span class="menu-close text-gray-400 pr-1">✖</span>
        </li>
      </ul>
      <ul
        class="flex flex-col [&>li]:border-b-2 [&>li]:border-slate-500 [&>li>button]:flex [&>li>button]:px-2 gap-3 text-base"
      >
        <li>
          <button class="scroll-to menu-close" data-target="hero">Inicio</button>
        </li>
        <li>
          <button class="scroll-to menu-close" data-target="experience">Experiencia</button>
        </li>
        <li>
          <button class="scroll-to menu-close" data-target="projects">Proyectos</button>
        </li>
        <li>
          <button class="scroll-to menu-close" data-target="about">Sobre mí</button>
        </li>
        <li>
          <button class="scroll-to menu-close" data-target="contact">Contacto</button>
        </li>
      </ul>

      <div class="flex flex-col items-end">
        <!-- <button
          id="toggle-language"
          class="flex p-2 gap-2 w-20 rounded-lg outline outline-1 outline-gray-500 bg-gunmetal/80"
        >
          <span class="relative flex">
            <Spanish class="size-5 rounded-lg" />
            <span class="text-gray-400">ES</span>
          </span>
          <span class="text-gray-400"><DropdownArrow /></span>
        </button>
        <ul
          id="dropdown-language"
          class="hidden [&>li]:p-2 w-20 rounded-lg bg-gray-800/90"
        >
          <li class="bg-gray-900/30">
            <button class="flex gap-2">
              <span class="relative flex">
                <Spanish class="size-5 rounded-lg" />
                <span class="text-gray-400">ES</span>
              </span>
            </button>
          </li>
          <li>
            <button class="flex gap-2">
              <span class="relative flex">
                <English class="size-5 rounded-lg" />
                <span class="text-gray-400">EN</span>
              </span>
            </button>
          </li>
        </ul> -->

        <LanguageDropdown secondary="true"  />
      </div>
    </nav>
  </div>
</header>

<script src="@/scripts/setupDropdown.ts"></script>
<script src="@/scripts/toggleHeader.ts"></script>
<script src="@/scripts/scrollHeader.ts"></script>

<style>
  header.down {
    background-color: rgb(255 255 255 / 0.6);
    box-shadow: inset 0 -1px 0 0 #eaeaea;
    backdrop-filter: saturate(3) blur(5px);
    /* background: #fffc; */
  }
</style>
