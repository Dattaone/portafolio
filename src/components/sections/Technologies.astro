---
import HTML from "@/icons/skills/HTML.astro";
import CSS from "@/icons/skills/CSS.astro";
import JS from "@/icons/skills/JS.astro";
import TS from "@/icons/skills/TS.astro";
import Tailwind from "@/icons/skills/Tailwind.astro";
import Node from "@/icons/skills/Node.astro";
import React from "@/icons/skills/React.astro";
import PHP from "@/icons/skills/PHP.astro";
import MySQL from "@/icons/skills/MySQL.astro";
import Git from "@/icons/skills/Git.astro";
import GoogleCloud from "@/icons/skills/GoogleCloud.astro";
import Wave from "@/icons/Wave.astro";
import { skills } from "@cv";

const SKILLS_ICONS: Record<string, any> = {
    "HTML"          : HTML,
    "CSS"           : CSS,
    "JavaScript"    : JS,
    "TypeScript"    : TS,
    "Tailwind"      : Tailwind,
    "Node"          : Node,
    "React"         : React,
    "PHP"           : PHP,
    "MySQL"         : MySQL,
    "Git"           : Git,
    "GoogleCloud"   : GoogleCloud
};
---

<section class="bg-sky-600" >
    <header>
        <div class="bottom-0 left-0 w-full h-28 overflow-hidden bg-white">
            <Wave svgClass="w-full h-full" color="fill-sky-600" />
        </div>
        
    </header>
    <main class="bg-sky-600 min-w-full mt-[-5px] pt-3 z-20">
        <h2 class="text-3xl font-bold text-white text-center">Tecnolog√≠as</h2>
        <div id="slider" class="w-[75vw] h-auto mx-auto overflow-hidden">
            <div id="slider-track" class="flex gap-8 justify-start py-12 animate-scroll">
                {skills.concat(skills).map(({ name }) => {
                    const Icon = SKILLS_ICONS[name];
                    return (
                        <div class="flex flex-col items-center">
                            <div  
                                class:list={[
                                    "bg-white rounded-full size-20 flex justify-center items-center overflow-hidden",
                                    {
                                        "bg-[#007acc]"     : name === "TypeScript",
                                        "bg-yellow-400" : name === "JavaScript"
                                    }
                                ]}
                            >
                                {Icon && <Icon class="size-16" />}
                            </div>
                            <div class="bg-sky-900/20 border border-sky-700/5 backdrop-blur-lg rounded-full w-20 h-5 mt-2 flex justify-center items-center">
                                <p class="text-sm font-medium text-white text-center">{name}</p>
                            </div>
                        </div>
                    );
                })}
            </div>
        </div>
    </main>
    <footer id="experience" class="bg-white">
        <div class="h-auto w-full relative">
            <div class="bottom-0 left-0 w-full overflow-hidden">
                <Wave class="w-full" color="fill-sky-600" isReversed={true} />
            </div>
        </div>
    </footer>
</section>

<style>
    @keyframes scroll {
        0% {
            transform: translateX(0);
        }
        100% {
            transform: translateX(-50%);
        }
    }

    .animate-scroll {
        animation: scroll 20s linear infinite;
    }
</style>

<script type="module">
    document.addEventListener("DOMContentLoaded", () => {
        const slider = document.getElementById('slider-track');
        const slideItems = slider.children;
        const totalWidth = Array.from(slideItems).reduce((acc, slide) => acc + slide.offsetWidth + parseInt(getComputedStyle(slide).marginRight), 0);
        slider.style.width = `${totalWidth}px`;
    });
</script>
