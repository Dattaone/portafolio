---
import Spanish from "@/icons/Spanish.astro";
import English from "@/icons/English.astro";
import DropdownArrow from "@/icons/DropdownArrow.astro";
import LanguageButton from "@/components/LanguageButton.astro";

const {
  primary = false,
  secondary = false,
  className = '',
  currentLang = 'ES',
} = Astro.props;


const buttonClass = [
  "toggle-element",
  primary   && `flex items-center gap-1 px-2.5 py-4`,
  secondary && `flex p-2 gap-2 w-20 rounded-lg outline outline-1 outline-gray-500 bg-gray-800/90 text-gray-400 `,
  className,
]
  .filter(Boolean)
  .join(" ");

const dropdownClass = [
  "dropdown-element hidden",
  primary && `absolute bg-white shadow-lg mt-1 [&>li]:p-2.5 rounded-lg right-0 [&>li:hover]:bg-gray-100 [&>li:hover]:transition-all `,
  secondary && `[&>li]:p-2 [&>li]:pl-0.5 w-20 rounded-lg bg-gray-800/90 text-gray-400 [&>li:hover]:bg-gray-900/30 `,
]
  .filter(Boolean)
  .join(" ");

const languages = [
  { code: 'ES', label: 'ES', Icon: Spanish },
  { code: 'EN', label: 'EN', Icon: English },
];
---
<div class="dropdown-container relative text-gray-600">
  <button
    class={buttonClass}
  >
    <span class="relative">{currentLang == 'ES' ? <Spanish class="size-5 rounded-xl" /> : <English class="size-5 rounded-xl" />}</span>
    <span>{currentLang}</span>
    <span class="text-gray-400"><DropdownArrow /></span>
  </button>
  <ul class={dropdownClass}>
    {
      
      languages.map(({code,label,Icon}) =>(
        <li>
          <LanguageButton lang={label}><Icon class="size-5 rounded-xl" /></LanguageButton>
        </li>
      ))
    }
  </ul>
 
</div>
<!-- {primary ? (
  <>
    <span class="relative"><Spanish class="size-5" /></span>
    <span>ES</span>
  </>
) : (
  <>
    <span class="relative flex">
      <Spanish class="size-5 rounded-lg" />
      <span class="text-gray-400">ES</span>
    </span>
    <span class="text-gray-400"><DropdownArrow /></span>
  </>
)
} -->